## Contributing to App Services SDK

## Regenerating all SDKs locally

In some situations like OpenAPIGenerator update or update of the common parts of the code.
To regenerate all SDK's locally please execute:

```
./scripts/generate_all.sh
```

Regeneration will require release of every package that was changed.

## Autogeneration of SDKs

1. All SDK's are autogenerated using OpenAPi Generator project.
2. Bot accounts creates PR with the new versions of the SDK that needs be reviewed by the team
3. Once PR is merged developers are responsible for creating tagged release 


## Release process

1. Check what SDK changed
2. Create tag
3. Generate changelog and put it into release description
## Contributing to App Services SDK

## Regenerating all SDKs locally

In some situations like OpenAPIGenerator update or update of the common parts of the code.
To regenerate all SDK's locally please execute:

```
./scripts/generate_all.sh
```

Regeneration will require release of every package that was changed.

## Autogeneration of SDKs

1. All SDKs are autogenerated using OpenAPI Generator project.
2. Bot accounts creates PR with the new versions of the SDK that needs be reviewed by the team
3. Once PR is merged developers are responsible for creating tagged release

## Triggering the `generate_client` GitHub Action locally

You may run the GitHub action to generate a client locally using [act](https://github.com/nektos/act).

It has some limitations however, you will need to comment out `env.CLIENT_PAYLOAD` as we will not be receiving an event from the API source repository.

```diff
jobs:
  generate_client:
    env:
+     # CLIENT_PAYLOAD: ${{ github.event.client_payload }}
-     CLIENT_PAYLOAD: ${{ github.event.client_payload }}
```

We will also need to change the versions of the actions to either the exact latest tag, or `master`.

```diff
  steps:
+      - uses: actions/setup-node@master
-      - uses: actions/setup-node@v2
+      - uses: actions/checkout@master
-      - uses: actions/checkout@v2
+      - uses: peter-evans/create-pull-request@master
-      - uses: peter-evans/create-pull-request@v3
```

Set the `CLIENT_PAYLOAD` environment variable to match the real client payload (you can find this in the source API repository's GitHub Action).

```shell
export CLIENT_PAYLOAD='{"id":"kafka-mgmt/v1","openapi":"./openapi/kas-fleet-manager.yaml"}'
```

Run `act` and voilÃ  ðŸª„.

```shell
act -j generate_client --secret CLIENT_PAYLOAD=$CLIENT_PAYLOAD --secret BF2_TOKEN=$BF2_TOKEN
```

## Release process

1. Check what SDK changed
2. Create tag
3. Generate changelog and put it into release description